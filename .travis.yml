language: ruby
rvm:
- 2.4.1
script:
- bundle exec jekyll build
- bundle exec htmlproofer ./_site --disable-external
branches:
  only:
  - devel
after_success:
- git clone https://$GITHUB_REPO
- cd $(basename ${GITHUB_REPO%.git})
- git config user.name "Travis CI"
- git config user.email ${EMAIL}
- rsync -az --delete --exclude '.git*' ../_site/ .
- touch .nojekyll
- git add -A .
- git commit -m "Generated Jekyll site by Travis CI - ${TRAVIS_BUILD_NUMBER}"
- git push --force "https://${DEPLOY_KEY}@${GITHUB_REPO}" HEAD:${REPO_TARGET_BRANCH}
env:
  global:
  - NOKOGIRI_USE_SYSTEM_LIBRARIES=true
  - GITHUB_REPO: github.com/meliga/meliga.github.io.git
  - REPO_TARGET_BRANCH: master
  - secure: hlkmjbxfqcnOq2iVC3OXZWK0MEtpBvhV9VdHlBraGRSjctihWWC7UgtcFMAUj+26KJFGV4nzLI5nZeV1rO3e094qIkcU3bQCN0ycHZEGiSWFph30LXbI42NY6UuqIiHQBnkT7YeZpMmITtWAbYAq7rRlYfhu2HS+eDrAKuUpcmqsToYmxUc9IYag4IAZx06I06PIVFKcyKsgkd/AmC4St3PqJfePi7c7zhXftNFTc7NP176z/qKAXOwzPcdbGYgugeplL/McvsJ1m1qk68rFKQ70w4hgjCXqqdGhcitQWWeRrdgr7dI5QV2O8xQHu9JNCEQqa8UEu36oO7W8+SFp+y7iNTpBUlXTPe3VH2CwdooGiAvDnDpsMDPuER3zu81Iw3kScqqpBV966E3BG0FZOmSinXHE/xCDFsHWsdOcw0DcSAZX/ImZJq4OVk10+pPqOxg/P9FWD9F3ubNXXhs5r6Z4SAXIL6+purXCCyTisf8mXzWVkajQn1L7y9cQ7Fe+zF43lOtXhhgIMDG6YoZJcjPKKg+BxmqGd4wYZrIH/8MWQt6ZjHM945YhvVkY3/mdhw5cb0qC/J9voJZUqt7A6rhnjTpIZoT5349z9GUt94H9CQUDuWeO1rKRv9m+N884C6WNb07kh/oaCUTKkod/yLmRFJEHcV80aYCzKI0A+wc=
  - secure: GMZ5j3sfLSkvE82uMhS7mSYAJ1nqX+cAIfXJy4w6WDfx/KvBKG4vyQwcrvTfLRdd3gzVEwOPBa/J5lNm33hsHUfwoBwVIRT31FcuyfOHxkQDuV1/3uP4s+bgVpo1aRfAqZSQAOaA5pZxIHxsd79FlOwRvLuOUyrtVeSX1isgVLRzILz7C5JTosy1t4JrlbNghLczg9Ofqov7GYuPN26cx64j8e6uXiI93LEXLg/tMJoXTsQpvfXVroYcwotm94kQmjT0TDiEj/bDI8oyiF8VU0oEnyeZqfODDP/og3DsPAOGmlxG1Ladaxhz96JiXWyMtv+zeOEufmGKZDPw9WX9fP/z4U0AOB98w9sDyskoC93xMX4bRkFJW1qLVnXSWkL2W/1sPIh4ouIikYvCOrDIGETSaomzCjInnfFYXK7KpihuCPGSG5FvtSsVlaEBimdMX553YMHECgNlKRbGz5TGeVn4hgVqgTC6pX/JXx6WaltBlCpv/+1dhKJwg14MwgIiqMg2FRFxBK4BbqH5QGAeShctvHf5cyQOEbiziJdbbjTPnDhFKrUTXP/MDdJRJ81BcqDGJitDiJbxex4mdaYmywy2hTfPW8+nmIOZboUnYL4masBMy3q+kaTqauYdLnsb+txlKlPEvh/HjBuFtKPlvda+d4gG1oWi5+9vfnIch9w=
